FreifunkMonitoringAPI
=====================

*freifunk node-API for the whole world ...*

Es gibt bereits Lösungen, die sich um das Monitoring von Mash-Netzwerken kümmern: ffmap-d3, libremap, openwikimap und netmon um nur einige zu nennen.
Bei Gesprächen mit anderen Freifunkern beim WirelessCommunityWeekend 2014 in Berlin kam der Wunsch nach mehr zusammenarbeit auf. Da für Oldenburg und Franken eine neue Monitoring-Lösung erstellt werden soll haben wir beschlossen die bestehenden Systeme anzuschauen und eine erste gemeinsame Schnittstelle zu schaffen auf der idealer Weise später mehrere Communities verschiedene technische Lösungen aufsetzen können.

**Bestehende Freifunk-APIs**
* [Netmon API](https://wiki.freifunk-ol.de/w/Netmon/API)
* [Libremap API](https://github.com/libremap/libremap-api/blob/master/doc-api.md)
* [OpenWifiMap API](https://github.com/freifunk/openwifimap-api)
* [ffmap-d3](http://freifunk.in-kiel.de/ffmap/nodes.json) verwendet [GeoJSON](http://geojson.org/geojson-spec.html)

**Nützliche Links:**
* [Best Practices for Designing a Pragmatic RESTful API](http://www.vinaysahni.com/best-practices-for-a-pragmatic-restful-api)
* [Freifunk Community-API Specs]( https://github.com/freifunk/api.freifunk.net/tree/master/specs )

Spezifikation
-------------

Die eigentliche Spezifikation erfolgt als [JSON-Schema](http://json-schema.org/) um bestehende Tools zur [Validierung](https://github.com/justinrainbow/json-schema) und [Generierung](http://www.alpacajs.org/) nutzen zu können. Schemata sind in der Form VERSION.spec.json gehalten.

Die Versionierung
-----------------

Grundlage, um eine einheitliche und stabiele Schnittstelle bereitstellen zu können ist eine strikte Versionierung.
Wir haben daher beschlossen auf [semantische Versionierung](http://semver.org/) zu setzen.

Jeder Versionsnummer setzt sich aus drei Feldern zusammen (z.B. v1.0.0):

	MAJOR.MINOR.PATCH
	
 * **MAJOR** werden nur bei Änderungen hochgezählt die inkompatiebel mit der vorherigen Version sind.
 * **MINOR** werden hochgezählt, wenn eine Abwärts-Kompatieble Änderung erfolgt.
 * **PATCH** werden bei jeder Rückwärt-kompatieblen Fehlerbehebungen und kleinenen Ergänzung hochgezählt.
 
Aktuelle Änderungen erfolgen in der **CURRENT** Version (z.B. current.json). Enthält die CURRENT-Version Änderungen, die vom Entwicklungsteam mitgetragen werden wird eine neue feste Versionsnummer (z.B. 1.0.1) erstellt.

Bestehende Versionen werden nicht mehr geändert.

API
===

Knoten
------

| URL                  | HTTP method | Description  | 
| -------------------- |:-----------:| ------------ |
| /api/router/:id      | GET         | Get router doc with ID :id |
| /api/router/         | POST        | Create new router doc with autogenerated ID |
| /api/router/:id      | PUT         | Update router doc with ID :id |
| /api/router/:id      | DELETE      | Delete router doc with ID :id |
| /api/routers_by_location/:bbox | GET | Get routers by geolocation bounding box :bbox |
| /api/routers_by_alias | GET, POST | Get routers by alias |

